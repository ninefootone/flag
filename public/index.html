<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Referee App</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="app-container">
        <div id="game-lobby">
            <h2>Referee App</h2>
            <button id="start-new-game-btn" class="main-btn">Start a New Game</button>
            <div class="join-game-section">
                <hr>
                <p>Or join an existing game:</p>
                <input type="text" id="game-id-input" placeholder="Enter Game ID">
            </div>
            <div class="role-selection">
                <h3>Select Your Role</h3>
                <div class="role-selection-wrapper">
                    <input type="radio" id="role-administrator" name="user-role" value="administrator" checked>
                    <label for="role-administrator">Game Administrator</label>

                    <input type="radio" id="role-head-referee" name="user-role" value="head-referee">
                    <label for="role-head-referee">Head Referee</label>

                    <input type="radio" id="role-scorer" name="user-role" value="scorer">
                    <label for="role-scorer">Scorer</label>

                    <input type="radio" id="role-clock" name="user-role" value="clock">
                    <label for="role-clock">Clock</label>

                    <input type="radio" id="role-coach" name="user-role" value="coach">
                    <label for="role-coach">Coach</label>
                </div>
            </div>
            <button id="join-game-btn" class="main-btn">Join Game</button>
            <p id="join-error-message" class="hidden error-message">Please enter a valid Game ID.</p>
        </div>

        <div id="settings-form" class="hidden">
            <h2>Game Settings</h2>
            <p id="current-game-id" class="hidden"><strong>Game ID:</strong> <span id="game-id-text"></span> (Share this with others to join)</p>
            <form id="settings-form-element">
                <label for="date-field">Date:</label>
                <input type="date" id="date-field">

                <label for="location-field">Location:</label>
                <input type="text" id="location-field" placeholder="City, State">

                <label for="team1-name">Home Team Name:</label>
                <input type="text" id="team1-name" placeholder="Enter Home Team Name">

                <label for="team2-name">Away Team Name:</label>
                <input type="text" id="team2-name" placeholder="Enter Away Team Name">

                <div class="settings-grid">
                    <div>
                        <label for="half-duration">Half Duration (min):</label>
                        <input type="number" id="half-duration" value="20" min="1">
                    </div>
                    <div>
                        <label for="play-clock-duration">Play Clock (sec):</label>
                        <input type="number" id="play-clock-duration" value="40" min="5">
                    </div>
                </div>

                <label for="timeouts-per-half">Timeouts Per Half:</label>
                <input type="number" id="timeouts-per-half" value="2" min="0">

                <button type="button" id="coin-toss-btn" class="main-btn">Coin Toss</button>
                <p id="coin-toss-result" class="hidden"></p>

                <button type="button" id="start-game-btn" class="main-btn">Start Game</button>
            </form>
        </div>

        <div id="game-interface" class="hidden">
            <div class="game-info">
                <p>Game Date: <span id="game-date"></span></p>
                <p>Location: <span id="game-location"></span></p>
            </div>

            <div class="clocks">
                <div class="clock-display">
                    <div id="game-clock-display" class="game-clock">20:00</div>
                    <div id="play-clock-display" class="play-clock">40</div>
                </div>
                <div class="clock-labels">
                    <p>GAME CLOCK</p>
                    <p>PLAY CLOCK</p>
                </div>
            </div>

            <div class="clock-controls">
                <button id="game-clock-toggle">Start</button>
                <button id="game-clock-reset">Reset</button>
                <button id="play-clock-toggle">Start</button>
                <button id="play-clock-reset">Reset</button>
                <label>
                    <input type="checkbox" id="auto-advance-play-clock" checked> Auto Advance
                </label>
            </div>

            <div class="main-controls">
                <div class="scoreboard-and-downs">
                    <div class="team-score" id="team1-score-display-container">
                        <span id="team1-name-display"></span>
                        <div class="score-and-timeouts">
                            <span id="team1-score-display" class="team-score-display">0</span>
                            <span id="team1-timeouts" class="team-timeouts">2</span>
                            <label id="team1-timeout-label">Timeouts</label>
                        </div>
                    </div>
                    <div class="team-score" id="team2-score-display-container">
                        <span id="team2-name-display"></span>
                        <div class="score-and-timeouts">
                            <span id="team2-score-display" class="team-score-display">0</span>
                            <span id="team2-timeouts" class="team-timeouts">2</span>
                            <label id="team2-timeout-label">Timeouts</label>
                        </div>
                    </div>
                    <div class="down-buttons">
                        <button class="down-btn" data-down="1">1st Down</button>
                        <button class="down-btn" data-down="2">2nd Down</button>
                        <button class="down-btn" data-down="3">3rd Down</button>
                        <button class="down-btn" data-down="4">4th Down</button>
                    </div>
                </div>

                <div class="adjust-buttons">
                    <button class="adjust-btn" data-type="game-clock" data-amount="1">+1min</button>
                    <button class="adjust-btn" data-type="game-clock" data-amount="-1">-1min</button>
                    <button class="adjust-btn" data-type="play-clock" data-amount="5">+5sec</button>
                    <button class="adjust-btn" data-type="play-clock" data-amount="-5">-5sec</button>
                </div>

                <div class="score-buttons">
                    <button class="score-btn" data-team="1" data-score="6" data-label="TD">
                        <span class="button-label">TOUCHDOWN</span>
                        <span class="button-score">6</span>
                    </button>
                    <button class="score-btn" data-team="1" data-score="1" data-label="XP">
                        <span class="button-label">XP</span>
                        <span class="button-score">1</span>
                    </button>
                    <button class="score-btn" data-team="1" data-score="2" data-label="2PT">
                        <span class="button-label">2XP</span>
                        <span class="button-score">2</span>
                    </button>
                    <button class="score-btn" data-team="1" data-score="2" data-label="Safety">
                        <span class="button-label">Safety</span>
                        <span class="button-score">2</span>
                    </button>
                </div>

                <div class="timeout-buttons">
                    <button class="use-timeout-btn" data-team="1">Team 1 Timeout</button>
                    <button class="use-timeout-btn" data-team="2">Team 2 Timeout</button>
                </div>

                <div class="log-section">
                    <h3>Score Log</h3>
                    <ul id="score-log" class="log-container"></ul>
                    <h3>Timeout Log</h3>
                    <ul id="timeout-log" class="log-container"></ul>
                </div>
            </div>

            <div class="game-controls-bottom">
                <button id="undo-btn" class="undo-btn">Undo Last Action</button>
                <button id="end-game-btn" class="end-game-btn">End Game</button>
            </div>
        </div>

        <div id="score-popup" class="hidden">
            <div class="popup-content">
                <h3 id="popup-header">Log Score Details</h3>
                <div class="player-input-grid">
                    <div>
                        <label for="qb-number">QB #</label>
                        <input type="number" id="qb-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="wr-number">WR #</label>
                        <input type="number" id="wr-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="rb-number">RB #</label>
                        <input type="number" id="rb-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="int-number">INT #</label>
                        <input type="number" id="int-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="safety-number">Safety #</label>
                        <input type="number" id="safety-number" placeholder="Optional">
                    </div>
                </div>
                <div class="popup-buttons">
                    <button id="log-score-btn" class="log-score-btn">Log Score</button>
                    <button id="cancel-popup-btn" class="cancel-popup-btn">Cancel</button>
                </div>
            </div>
        </div>

        <div id="game-summary" class="hidden">
            <h2>Game Summary</h2>
            <div class="summary-scoreboard">
                <div class="summary-team">
                    <span id="summary-team1-name" class="summary-team-name"></span>
                    <span id="summary-team1-score" class="summary-score"></span>
                </div>
                <div class="summary-team">
                    <span id="summary-team2-name" class="summary-team-name"></span>
                    <span id="summary-team2-score" class="summary-score"></span>
                </div>
            </div>
            <div class="summary-logs">
                <div class="log-container">
                    <h3 class="log-title">Score and Timeout Log</h3>
                    <ul id="summary-score-log"></ul>
                    <ul id="summary-timeout-log"></ul>
                </div>
            </div>
            <button id="start-new-game-from-summary-btn" class="main-btn">Start a New Game</button>
        </div>
    </div>
    <p class="version">v1.8</p>
    <script src="/script.js"></script>
</body>
</html>