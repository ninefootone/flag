<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Referee App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="app-container">
        <div id="game-lobby">
            <h2>Referee App</h2>
            <button id="start-new-game-btn" class="main-btn">Start a New Game</button>
            <div class="join-game-section">
                <hr>
                <p>Or join an existing game:</p>
                <input type="text" id="game-id-input" placeholder="Enter Game ID">
            </div>
            <div class="role-selection">
                <h3>Select Your Role</h3>
                <div class="role-selection-wrapper">
                    <input type="radio" id="role-administrator" name="user-role" value="administrator" checked>
                    <label for="role-administrator">Game Administrator</label>

                    <input type="radio" id="role-head-referee" name="user-role" value="head-referee">
                    <label for="role-head-referee">Head Referee</label>

                    <input type="radio" id="role-scorer" name="user-role" value="scorer">
                    <label for="role-scorer">Scorer</label>

                    <input type="radio" id="role-clock" name="user-role" value="clock">
                    <label for="role-clock">Clock</label>

                    <input type="radio" id="role-coach" name="user-role" value="coach">
                    <label for="role-coach">Coach</label>
                </div>
            </div>
            <button id="join-game-btn" class="main-btn">Join Game</button>
            <p id="join-error-message" class="hidden error-message">Please enter a valid Game ID.</p>
        </div>

        <div id="settings-form" class="hidden">
            <h2>Game Settings</h2>
            <form id="settings-form-element">
                <label for="date-field">Date:</label>
                <input type="date" id="date-field">

                <label for="location-field">Location:</label>
                <input type="text" id="location-field" placeholder="City, State">

                <label for="team1-name">Home Team Name:</label>
                <input type="text" id="team1-name" placeholder="Home Team">

                <label for="team2-name">Away Team Name:</label>
                <input type="text" id="team2-name" placeholder="Away Team">

                <div class="settings-grid">
                    <div>
                        <label for="half-duration">Half Duration (min):</label>
                        <input type="number" id="half-duration" value="20" min="1">
                    </div>
                    <div>
                        <label for="play-clock-duration">Play Clock (sec):</label>
                        <input type="number" id="play-clock-duration" value="40" min="5">
                    </div>
                    <div>
                        <label for="timeouts-per-half">Timeouts Per Half:</label>
                        <input type="number" id="timeouts-per-half" value="2" min="0">
                    </div>
                </div>

                <div class="coin-toss-section">
                    <h3>Coin Toss</h3>
                    <p>Tap the button to flip a coin and decide who gets the ball first.</p>
                    <div class="coin-toss-buttons">
                        <button type="button" id="coin-toss-btn">Flip Coin</button>
                    </div>
                    <p id="coin-toss-result"></p>
                </div>

                <button type="button" id="start-game-btn">Start Game</button>
            </form>
        </div>

        <div id="game-interface" class="hidden">
            <header>
                <h1 class="game-info">
                    <span id="game-date"></span><br>
                    <span id="game-location"></span>
                </h1>
                <div class="scoreboard-main">
                    <div class="team-display">
                        <h2 id="team1-name-display" class="team-name"></h2>
                        <p class="timeouts">Timeouts: <span id="team1-timeouts"></span></p>
                    </div>
                    <div class="score-display">
                        <span id="team1-score-display" class="score">0</span>
                        <span>-</span>
                        <span id="team2-score-display" class="score">0</span>
                    </div>
                    <div class="team-display">
                        <h2 id="team2-name-display" class="team-name"></h2>
                        <p class="timeouts">Timeouts: <span id="team2-timeouts"></span></p>
                    </div>
                </div>
            </header>

            <section class="game-clocks-section">
                <div class="clock-display game-clock-bg">
                    <span id="game-clock-display" class="clock-time"></span>
                    <p class="clock-label">Game Clock</p>
                </div>
                <div class="clock-controls">
                    <button id="game-clock-toggle" class="clock-btn start-stop-btn">Start</button>
                    <button id="game-clock-reset" class="clock-btn reset-btn">Reset</button>
                </div>

                <div class="clock-display play-clock-bg">
                    <span id="play-clock-display" class="clock-time"></span>
                    <p class="clock-label">Play Clock</p>
                </div>
                <div class="clock-controls">
                    <button id="play-clock-toggle" class="clock-btn start-stop-btn">Start</button>
                    <button id="play-clock-reset" class="clock-btn reset-btn">Reset</button>
                    <div class="auto-advance-option">
                        <input type="checkbox" id="auto-advance-play-clock" checked>
                        <label for="auto-advance-play-clock">Auto-advance down</label>
                    </div>
                </div>
            </section>

            <section class="main-controls">
                <div class="down-and-distance">
                    <p>Down: <span id="current-down-display">1</span></p>
                    <div class="down-buttons">
                        <button class="down-btn">1st</button>
                        <button class="down-btn">2nd</button>
                        <button class="down-btn">3rd</button>
                        <button class="down-btn">4th</button>
                    </div>
                </div>
                <div class="score-and-timeouts">
                    <div class="score-buttons">
                        <button data-team="team1" data-score="6">TD</button>
                        <button data-team="team1" data-score="1">PAT</button>
                        <button data-team="team1" data-score="2">2-PT</button>
                        <button data-team="team1" data-score="3">FG</button>
                        <button data-team="team1" data-score="2">Safety</button>
                        <button data-team="team2" data-score="6">TD</button>
                        <button data-team="team2" data-score="1">PAT</button>
                        <button data-team="team2" data-score="2">2-PT</button>
                        <button data-team="team2" data-score="3">FG</button>
                        <button data-team="team2" data-score="2">Safety</button>
                    </div>
                    <div class="timeout-buttons">
                        <button id="team1-timeout-btn" class="use-timeout-btn">Timeout - Team 1</button>
                        <button id="team2-timeout-btn" class="use-timeout-btn">Timeout - Team 2</button>
                    </div>
                </div>
                <div class="adjust-buttons">
                    <button id="adjust-time-btn" class="adjust-btn">Adjust Time</button>
                    <button id="adjust-score-btn" class="adjust-btn">Adjust Score</button>
                    <button id="adjust-timeouts-btn" class="adjust-btn">Adjust Timeouts</button>
                </div>
            </section>

            <div class="game-log">
                <h3>Game Log</h3>
                <ul id="score-log"></ul>
                <ul id="timeout-log"></ul>
            </div>

            <div class="action-buttons">
                <button id="undo-btn" class="main-btn">Undo</button>
                <button id="end-game-btn" class="main-btn">End Game</button>
            </div>

            <div class="share-game-section">
                <p>Game ID: <span id="game-id-text"></span></p>
                <button id="share-game-btn">Share Game</button>
            </div>
        </div>

        <div id="score-popup" class="hidden popup-overlay">
            <div class="popup-content">
                <h3 id="popup-header">Enter Scorer Details</h3>
                <div class="player-input-grid">
                    <div>
                        <label for="qb-number">QB Number:</label>
                        <input type="number" id="qb-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="wr-number">WR Number:</label>
                        <input type="number" id="wr-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="rb-number">RB Number:</label>
                        <input type="number" id="rb-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="int-number">INT Number:</label>
                        <input type="number" id="int-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="safety-number">Safety Number:</label>
                        <input type="number" id="safety-number" placeholder="Optional">
                    </div>
                </div>
                <div class="popup-buttons">
                    <button id="log-score-btn" class="log-score-btn">Log Score</button>
                    <button id="cancel-popup-btn" class="cancel-popup-btn">Cancel</button>
                </div>
            </div>
        </div>

        <div id="game-summary" class="hidden">
            <h2>Game Summary</h2>
            <div class="summary-scoreboard">
                <div class="summary-team">
                    <span id="summary-team1-name" class="summary-team-name"></span>
                    <span id="summary-team1-score" class="summary-score"></span>
                </div>
                <div class="summary-team">
                    <span id="summary-team2-name" class="summary-team-name"></span>
                    <span id="summary-team2-score" class="summary-score"></span>
                </div>
            </div>
            <div class="summary-logs">
                <div class="log-container">
                    <h3 class="log-title">Score and Timeout Log</h3>
                    <ul id="summary-score-log"></ul>
                    <ul id="summary-timeout-log"></ul>
                </div>
            </div>
            <button id="start-new-game-from-summary-btn" class="main-btn">Start a New Game</button>
        </div>
    </div>
    <p class="version">v2.0.1</p>
    <script src="/script.js"></script>
</body>
</html>