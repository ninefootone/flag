<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Flag</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="app-container">
        <div id="game-lobby" class="">
            <!-- <h2>Referee App</h2> -->
            <img src="/assets/sheffield-giants-logo.png" class="giants-logo"/>
            <button id="start-new-game-btn" class="main-btn">Start a New Game</button>
            <div class="join-game-section">
                <hr>
                <h2>Or join an existing game:</h2>
                <input type="text" id="game-id-input" placeholder="Enter Game ID">
            </div>
            <div class="role-selection">
                <h3>Select Your Role</h3>
                <div class="role-selection-wrapper">
                    <input type="radio" id="role-administrator" name="user-role" value="administrator" checked>
                    <label for="role-administrator">Game Administrator</label>

                    <input type="radio" id="role-head-referee" name="user-role" value="head-referee">
                    <label for="role-head-referee">Head Referee</label>

                    <input type="radio" id="role-scorer" name="user-role" value="scorer">
                    <label for="role-scorer">Scorer</label>

                    <input type="radio" id="role-clock" name="user-role" value="clock">
                    <label for="role-clock">Clock</label>

                    <input type="radio" id="role-coach" name="user-role" value="coach">
                    <label for="role-coach">Coach</label>
                </div>
            </div>
            <button id="join-game-btn" class="main-btn">Join Game</button>
            <p id="join-error-message" class="hidden error-message">Please enter a valid Game ID.</p>
        </div>

        <div id="settings-form" class="hidden">
            <h2>Game Settings</h2>
            <p id="current-game-id" class="hidden"><strong>Game ID:</strong> <span id="game-id-text"></span> (Share this with others to join)</p>
            <form id="settings-form-element">
                <label for="date-field">Date:</label>
                <input type="date" id="date-field">

                <label for="location-field">Location:</label>
                <input type="text" id="location-field" placeholder="City, State">

                <label for="team1-name">Home Team Name:</label>
                <input type="text" id="team1-name" placeholder="Home Team">

                <label for="team2-name">Away Team Name:</label>
                <input type="text" id="team2-name" placeholder="Away Team">

                <div class="settings-grid">
                    <div>
                        <label for="half-duration">Half Duration (min):</label>
                        <input type="number" id="half-duration" value="20" min="1">
                    </div>
                    <div>
                        <label for="play-clock-duration">Play Clock (sec):</label>
                        <input type="number" id="play-clock-duration" value="40" min="5">
                    </div>
                    <div>
                        <label for="timeouts-per-half">Timeouts Per Half:</label>
                        <input type="number" id="timeouts-per-half" value="2" min="0">
                    </div>
                </div>

                <div class="coin-toss-section">
                    <h3>Coin Toss</h3>
                    <p>Tap the button to flip a coin and decide who gets the ball first.</p>
                    <div class="coin-toss-buttons">
                        <button type="button" id="coin-toss-btn">Flip Coin</button>
                    </div>
                    <p id="coin-toss-result"></p>
                </div>

                <button type="button" id="start-game-btn">Start Game</button>
            </form>
        </div>

        <div id="game-interface" class="hidden">
            <header>
                <h1 class="game-info">
                    <span id="game-date"></span><br>
                    <span id="game-location"></span>
                </h1>
            </header>

            <section class="game-clocks-section">
                <div class="clock-display game-clock-bg">
                    <span id="game-clock-display" class="clock-time"></span>
                    <p class="clock-label">Game Clock</p>
                </div>
                <div class="clock-controls">
                    <button id="game-clock-toggle" class="clock-btn start-stop-btn">Start</button>
                    <button id="game-clock-reset" class="clock-btn reset-btn">Reset</button>
                </div>
            </section>

            <section class="play-clock-section">
                <div class="clock-display play-clock-bg">
                    <span id="play-clock-display" class="clock-time"></span>
                    <p class="clock-label">Play Clock</p>
                </div>
                <div class="play-clock-controls">
                    <button id="play-clock-toggle" class="clock-btn start-stop-btn">Start</button>
                    <button id="play-clock-reset" class="clock-btn reset-btn">Reset</button>
                </div>
                <div class="play-clock-options">
                    <label for="auto-advance-play-clock">
                        <input type="checkbox" id="auto-advance-play-clock"> Auto Advance
                    </label>
                </div>
            </section>

            <section class="down-buttons-section">
                <p>Down</p>
                <div class="down-buttons">
                    <button class="down-btn" data-down="1">1</button>
                    <button class="down-btn" data-down="2">2</button>
                    <button class="down-btn" data-down="3">3</button>
                    <button class="down-btn" data-down="4">4</button>
                </div>
            </section>

            <section class="scoreboard-section">
                <div class="team-score">
                    <span id="team1-name-display" class="team-name"></span>
                    <div class="score-container">
                        <button class="adjust-btn" data-team="1" data-adjust="-">-</button>
                        <span id="team1-score-display" class="score"></span>
                        <button class="adjust-btn" data-team="1" data-adjust="+">+</button>
                    </div>
                    <div class="score-buttons">
                        <button class="score-btn" data-team="1" data-score="6" data-label="Touchdown">
                            <span class="button-label">TD</span>
                            <span class="button-score">6</span>
                        </button>
                        <button class="score-btn" data-team="1" data-score="1" data-label="PAT">
                            <span class="button-label">1XP</span>
                            <span class="button-score">1</span>
                        </button>
                        <button class="score-btn" data-team="1" data-score="2" data-label="2PT">
                            <span class="button-label">2XP</span>
                            <span class="button-score">2</span>
                        </button>
                        <button class="score-btn" data-team="1" data-score="2" data-label="Safety">
                            <span class="button-label">Safety</span>
                            <span class="button-score">2</span>
                        </button>
                    </div>
                </div>

                <div class="team-score">
                    <span id="team2-name-display" class="team-name"></span>
                    <div class="score-container">
                        <button class="adjust-btn" data-team="2" data-adjust="-">-</button>
                        <span id="team2-score-display" class="score"></span>
                        <button class="adjust-btn" data-team="2" data-adjust="+">+</button>
                    </div>
                    <div class="score-buttons">
                        <button class="score-btn" data-team="2" data-score="6" data-label="Touchdown">
                            <span class="button-label">TD</span>
                            <span class="button-score">6</span>
                        </button>
                        <button class="score-btn" data-team="2" data-score="1" data-label="PAT">
                            <span class="button-label">1XP</span>
                            <span class="button-score">1</span>
                        </button>
                        <button class="score-btn" data-team="2" data-score="2" data-label="2PT">
                            <span class="button-label">2XP</span>
                            <span class="button-score">2</span>
                        </button>
                        <button class="score-btn" data-team="2" data-score="2" data-label="Safety">
                            <span class="button-label">Safety</span>
                            <span class="button-score">2</span>
                        </button>
                    </div>
                </div>
            </section>

            <section class="timeout-buttons-section">
                <p>Timeouts</p>
                <div class="timeout-buttons">
                    <div class="timeout-button-wrapper">
                        <span class="timeout-label" id="team1-timeout-label"></span>
                        <button class="use-timeout-btn" data-team="1">
                            <span class="timeout-count" id="team1-timeouts"></span>
                        </button>
                    </div>
                    <div class="timeout-button-wrapper">
                        <span class="timeout-label" id="team2-timeout-label"></span>
                        <button class="use-timeout-btn" data-team="2">
                            <span class="timeout-count" id="team2-timeouts"></span>
                        </button>
                    </div>
                </div>
            </section>

            <section class="score-log">
                <div class="log-container">
                    <h3 class="log-title">Score and Timeout Log</h3>
                    <ul id="score-log"></ul>
                    <ul id="timeout-log"></ul>
                </div>
            </section>

            <div class="action-buttons">
                <button id="undo-btn" class="undo-btn">Undo Last Action</button>
                <button id="end-game-btn" class="end-game-btn">End Game</button>
            </div>
        </div>

        <div id="score-popup" class="hidden">
            <div class="popup-content">
                <h3 id="popup-header">Log Score Details</h3>
                <div class="player-input-grid">
                    <div>
                        <label for="qb-number">QB #</label>
                        <input type="number" id="qb-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="wr-number">WR #</label>
                        <input type="number" id="wr-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="rb-number">RB #</label>
                        <input type="number" id="rb-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="int-number">INT #</label>
                        <input type="number" id="int-number" placeholder="Optional">
                    </div>
                    <div>
                        <label for="safety-number">Safety #</label>
                        <input type="number" id="safety-number" placeholder="Optional">
                    </div>
                </div>
                <div class="popup-buttons">
                    <button id="log-score-btn" class="log-score-btn">Log Score</button>
                    <button id="cancel-popup-btn" class="cancel-popup-btn">Cancel</button>
                </div>
            </div>
        </div>

        <div id="game-summary" class="hidden">
            <h2>Game Summary</h2>
            <div class="summary-scoreboard">
                <div class="summary-team">
                    <span id="summary-team1-name" class="summary-team-name"></span>
                    <span id="summary-team1-score" class="summary-score"></span>
                </div>
                <div class="summary-team">
                    <span id="summary-team2-name" class="summary-team-name"></span>
                    <span id="summary-team2-score" class="summary-score"></span>
                </div>
            </div>
            <div class="summary-logs">
                <div class="log-container">
                    <h3 class="log-title">Score and Timeout Log</h3>
                    <ul id="summary-score-log"></ul>
                    <ul id="summary-timeout-log"></ul>
                </div>
            </div>
            <button id="start-new-game-from-summary-btn" class="main-btn">Start a New Game</button>
        </div>
    </div>
    <p class="version">v1.7</p>
    <script src="/script.js"></script>
</body>
</html>